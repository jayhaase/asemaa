<!-- Map Area with Image and Marker -->
<div id="mapContainer" class="relative w-[600px] h-[600px] flex items-center justify-center bg-white border border-gray-300 rounded-lg">
    <!-- Map Image -->
    <div class="relative">
        <img
            src="/images/turtle-island.png"
            alt="Turtle Island Map"
            class="w-full h-auto">

        <!-- Static Markers -->
        {% for location in locations %}
        <button 
            class="absolute bg-red-400 h-2.5 w-2.5 rounded-full transform -translate-x-1/2 -translate-y-1/2 border border-white opacity-60 hover:opacity-100 hover:scale-150 transition-all cursor-pointer z-10"
            :class="{'opacity-100 scale-150': selectedMarker.x === {{ location.coordinates.x }} && selectedMarker.y === {{ location.coordinates.y }}}"
            style="left: {{ location.coordinates.x }}%; top: {{ location.coordinates.y }}%"
            @mouseover="marker.x = {{ location.coordinates.x }}; marker.y = {{ location.coordinates.y }}; marker.visible = true"
            @mouseleave="marker.visible = false"
            @click="$dispatch('show-location', {
                name: '{{ location.name | safe }}',
                yearEstablished: '{{ location.yearEstablished | safe }}',
                description: '{{ location.description | safe }}',
                historicalSignificance: '{{ location.historicalSignificance | safe }}',
                coordinates: { x: {{ location.coordinates.x }}, y: {{ location.coordinates.y }} }
            }); document.getElementById('location-{{ location.name | slugify }}').scrollIntoView({ behavior: 'smooth', block: 'center' })">
        </button>
        {% endfor %}

        <!-- Hover/Selected Marker with Pulse -->
        <template x-if="marker.visible || (selectedMarker.x !== null && showDialog === false)">
            <div
                x-transition:enter="transition ease-out duration-200"
                x-transition:enter-start="opacity-0 scale-50"
                x-transition:enter-end="opacity-100 scale-100"
                :style="{ 
                    left: (marker.visible ? marker.x : selectedMarker.x) + '%', 
                    top: (marker.visible ? marker.y : selectedMarker.y) + '%' 
                }"
                class="absolute bg-red-500 h-4 w-4 rounded-full transform -translate-x-1/2 -translate-y-1/2 border border-black">
                <div class="absolute inset-0 rounded-full bg-red-500 animate-ping-large"></div>
            </div>
        </template>
    </div>
</div> 